PebbleSDK2
==========

Improve waf-based Pebble SDK build system regarding dependencies handling.

How to create the waf script for PebbleSDK
-------------------------------------------
Simply execute in this directory:

*./waf-light configure build*

And replace the generated **waf** script into your *PebbleSDK/Pebble* directory

Modifications
-------------

- waflib.Task.Task have been overloaded to make signature of Tasks in charge of handling resources (.raw, .png, .png-trans, .font) depends on the hash of the dictionnary generated by parsing appinfo.json. Each time the appinfo.json file is modified, all resources-based files are re-build and related dependent Tasks are re-executed. Each time a resource file is modified, all file based on this resource file are re-build.

- Build have been refactored into 5 Task Generators: appinfo_res, datapack, appinfo_auto_c, pbl_program, pbl_bundle. Most of the time gneral purpose Task Generator are used instead of Rule-based ones except for pbl_bundle which is almost unchanged.

- Dependencies of Nodes generated into each of the 5 Task Generators are properly handled so that re-build are triggered only when necessary.

- Append the attribute ext_out=['.h'] to the Task in charge of generating src/resource_ids.auto.h header so that it is guaranted to be executed before any c compilation task.

- Add arm-toolchain-path option to specify the path the ARM cross toolchain and pebble-sdk option to specify the path of the PebbleSDK directory. Useful when using directly waf in the app build directory.

Limitations
-------------

- For rule-based Task Generator processing font_key_header and font_key_table, the corresponding nodes (font_key_header_node, font_key_table_node, font_key_include_path) must be provided as arugments to the higher level Task Generator (appinfo_res). Also, I don't understand in which case they might be set.
